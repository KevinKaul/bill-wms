# ä»“åº“ç®¡ç†ç³»ç»Ÿ API å®ç°çŠ¶æ€

## æ¦‚è¿°

æœ¬æ–‡æ¡£è®°å½•äº†ä»“åº“ç®¡ç†ç³»ç»ŸAPIçš„å®ç°çŠ¶æ€ï¼ŒåŸºäº `API_OUTLINE.md` å’Œ `README.md` ä¸­çš„éœ€æ±‚è§„èŒƒã€‚

## å·²å®ç°çš„APIæ¨¡å—

### âœ… 1. äº§å“ç®¡ç†æ¨¡å— (Product Management)
- **GET** `/api/v1/products` - è·å–äº§å“åˆ—è¡¨
- **POST** `/api/v1/products` - åˆ›å»ºäº§å“ï¼ˆæ”¯æŒåŸææ–™å’Œæˆå“ï¼‰
- **GET** `/api/v1/products/{id}` - è·å–äº§å“è¯¦æƒ…
- **PUT** `/api/v1/products/{id}` - æ›´æ–°äº§å“
- **DELETE** `/api/v1/products/{id}` - åˆ é™¤äº§å“

**ç‰¹æ€§ï¼š**
- æ”¯æŒåŸææ–™å’Œæˆå“ä¸¤ç§ç±»å‹
- è‡ªåŠ¨BOMæˆæœ¬è®¡ç®—
- å®Œæ•´çš„æ•°æ®éªŒè¯
- é‡å¤SKUæ£€æŸ¥

### âœ… 2. é‡‡è´­ç®¡ç†æ¨¡å— (Purchase Management)

#### 2.1 é‡‡è´­è®¡åˆ’ç®¡ç†
- **GET** `/api/v1/purchase/plans` - è·å–é‡‡è´­è®¡åˆ’åˆ—è¡¨
- **POST** `/api/v1/purchase/plans` - åˆ›å»ºé‡‡è´­è®¡åˆ’
- **GET** `/api/v1/purchase/plans/{id}` - è·å–é‡‡è´­è®¡åˆ’è¯¦æƒ…
- **PUT** `/api/v1/purchase/plans/{id}` - æ›´æ–°é‡‡è´­è®¡åˆ’
- **DELETE** `/api/v1/purchase/plans/{id}` - åˆ é™¤é‡‡è´­è®¡åˆ’
- **POST** `/api/v1/purchase/plans/{id}/approve` - æ‰¹å‡†é‡‡è´­è®¡åˆ’
- **POST** `/api/v1/purchase/plans/{id}/execute` - æ‰§è¡Œé‡‡è´­è®¡åˆ’ï¼ˆç”Ÿæˆé‡‡è´­å•ï¼‰

#### 2.2 é‡‡è´­å•ç®¡ç†
- **GET** `/api/v1/purchase/orders` - è·å–é‡‡è´­å•åˆ—è¡¨
- **POST** `/api/v1/purchase/orders` - åˆ›å»ºé‡‡è´­å•
- **GET** `/api/v1/purchase/orders/{id}` - è·å–é‡‡è´­å•è¯¦æƒ…
- **PUT** `/api/v1/purchase/orders/{id}` - æ›´æ–°é‡‡è´­å•
- **DELETE** `/api/v1/purchase/orders/{id}` - åˆ é™¤é‡‡è´­å•
- **POST** `/api/v1/purchase/orders/{id}/confirm` - ç¡®è®¤é‡‡è´­å•
- **POST** `/api/v1/purchase/orders/{id}/mark-paid` - æ ‡è®°ä»˜æ¬¾
- **POST** `/api/v1/purchase/orders/{id}/mark-arrived` - æ ‡è®°åˆ°è´§ï¼ˆè§¦å‘åº“å­˜å…¥åº“ï¼‰

**ç‰¹æ€§ï¼š**
- å®Œæ•´çš„é‡‡è´­è®¡åˆ’åˆ°é‡‡è´­å•æµç¨‹
- è‡ªåŠ¨è®¡ç®—é™„åŠ è´¹ç”¨åˆ†æ‘Š
- åˆ°è´§æ—¶è‡ªåŠ¨åˆ›å»ºåŸææ–™æ‰¹æ¬¡
- çŠ¶æ€æµè½¬ç®¡ç†

### âœ… 3. ä¾›åº”å•†ç®¡ç†æ¨¡å— (Supplier Management)
- **GET** `/api/v1/suppliers` - è·å–ä¾›åº”å•†åˆ—è¡¨
- **POST** `/api/v1/suppliers` - åˆ›å»ºä¾›åº”å•†
- **GET** `/api/v1/suppliers/{id}` - è·å–ä¾›åº”å•†è¯¦æƒ…
- **PUT** `/api/v1/suppliers/{id}` - æ›´æ–°ä¾›åº”å•†
- **DELETE** `/api/v1/suppliers/{id}` - åˆ é™¤ä¾›åº”å•†

**ç‰¹æ€§ï¼š**
- æ”¯æŒææ–™ä¾›åº”å•†ã€åŠ å·¥ä¾›åº”å•†ã€æ··åˆä¾›åº”å•†
- ä¾›åº”å•†ä»£å·å”¯ä¸€æ€§æ£€æŸ¥
- å…³è”è®¢å•ç»Ÿè®¡ä¿¡æ¯
- çº§è”åˆ é™¤ä¿æŠ¤

### âœ… 4. åº“å­˜ç®¡ç†æ¨¡å— (Inventory Management)
- **GET** `/api/v1/inventory/overview` - è·å–åº“å­˜æ¦‚è§ˆ
- **GET** `/api/v1/inventory/adjustments` - è·å–åº“å­˜è°ƒæ•´è®°å½•
- **POST** `/api/v1/inventory/adjustments` - åˆ›å»ºåº“å­˜è°ƒæ•´
- **GET** `/api/v1/inventory/movements` - è·å–åº“å­˜ç§»åŠ¨è®°å½•

**ç‰¹æ€§ï¼š**
- åº“å­˜æ€»è§ˆç»Ÿè®¡
- åº“å­˜è°ƒæ•´è®°å½•è·Ÿè¸ª
- è‡ªåŠ¨åº“å­˜ç§»åŠ¨è®°å½•
- æŒ‰äº§å“ç±»å‹åˆ†ç±»ç»Ÿè®¡

## ğŸš§ å¾…å®ç°çš„APIæ¨¡å—

### 5. åŠ å·¥ç®¡ç†æ¨¡å— (Production Management)
**è®¡åˆ’å®ç°çš„APIï¼š**
- **GET** `/api/v1/production/orders` - è·å–åŠ å·¥å•åˆ—è¡¨
- **POST** `/api/v1/production/orders` - åˆ›å»ºåŠ å·¥å•
- **GET** `/api/v1/production/orders/{id}` - è·å–åŠ å·¥å•è¯¦æƒ…
- **POST** `/api/v1/production/orders/calculate-materials` - è®¡ç®—ç‰©æ–™éœ€æ±‚
- **POST** `/api/v1/production/orders/{id}/confirm` - ç¡®è®¤åŠ å·¥å•
- **POST** `/api/v1/production/orders/{id}/start` - å¼€å§‹ç”Ÿäº§ï¼ˆFIFOé¢†æ–™ï¼‰
- **POST** `/api/v1/production/orders/{id}/complete` - å®Œæˆç”Ÿäº§

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- BOMå±•å¼€è®¡ç®—ç‰©æ–™éœ€æ±‚
- FIFOç®—æ³•è‡ªåŠ¨é¢†æ–™
- æˆæœ¬ç²¾ç¡®è®¡ç®—
- æˆå“æ‰¹æ¬¡ç”Ÿæˆ

### 6. æ‰¹æ¬¡ç®¡ç†æ¨¡å— (Batch Management)
**è®¡åˆ’å®ç°çš„APIï¼š**
- **GET** `/api/v1/batches/raw-materials` - è·å–åŸææ–™æ‰¹æ¬¡åˆ—è¡¨
- **GET** `/api/v1/batches/raw-materials/{id}` - è·å–åŸææ–™æ‰¹æ¬¡è¯¦æƒ…
- **GET** `/api/v1/batches/finished-products` - è·å–æˆå“æ‰¹æ¬¡åˆ—è¡¨
- **GET** `/api/v1/batches/finished-products/{id}` - è·å–æˆå“æ‰¹æ¬¡è¯¦æƒ…
- **GET** `/api/v1/batches/inventory` - æ‰¹æ¬¡åº“å­˜æŸ¥è¯¢

**æ ¸å¿ƒåŠŸèƒ½ï¼š**
- åŸææ–™æ‰¹æ¬¡è·Ÿè¸ª
- æˆå“æ‰¹æ¬¡ç®¡ç†
- FIFOæ’åºæŸ¥è¯¢
- æ‰¹æ¬¡æˆæœ¬è¿½æº¯

## ğŸ”§ æŠ€æœ¯å®ç°ç‰¹ç‚¹

### æ•°æ®éªŒè¯
- ä½¿ç”¨ Zod è¿›è¡Œä¸¥æ ¼çš„è¾“å…¥éªŒè¯
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’Œå“åº”æ ¼å¼
- å‚æ•°ç±»å‹è½¬æ¢å’Œé»˜è®¤å€¼å¤„ç†

### æ•°æ®åº“è®¾è®¡
- ä½¿ç”¨ Prisma ORM 
- æ”¯æŒå¤æ‚çš„å…³è”æŸ¥è¯¢
- äº‹åŠ¡ä¿è¯æ•°æ®ä¸€è‡´æ€§
- æ‰¹æ¬¡æˆæœ¬ç²¾ç¡®è®¡ç®—

### è®¤è¯æˆæƒ
- ç»Ÿä¸€çš„è®¤è¯ä¸­é—´ä»¶
- åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶
- JWT Token éªŒè¯

### APIè®¾è®¡åŸåˆ™
- RESTful API è®¾è®¡
- ç»Ÿä¸€çš„å“åº”æ ¼å¼
- åˆ†é¡µæ”¯æŒ
- æ’åºå’Œè¿‡æ»¤
- é”™è¯¯ç æ ‡å‡†åŒ–

## ğŸ“Š å®ç°ç»Ÿè®¡

- **å·²å®ŒæˆAPIç«¯ç‚¹æ•°ï¼š** 28ä¸ª
- **å®ç°çš„æ ¸å¿ƒæ¨¡å—ï¼š** 4ä¸ª
- **å¾…å®ç°æ¨¡å—ï¼š** 2ä¸ª
- **å®Œæˆåº¦ï¼š** çº¦75%

## ğŸš€ ä¸‹ä¸€æ­¥è®¡åˆ’

1. **åŠ å·¥ç®¡ç†æ¨¡å—**
   - å®ç°BOMå±•å¼€ç®—æ³•
   - FIFOé¢†æ–™é€»è¾‘
   - æˆæœ¬è®¡ç®—å¼•æ“

2. **æ‰¹æ¬¡ç®¡ç†æ¨¡å—**
   - æ‰¹æ¬¡æŸ¥è¯¢ä¼˜åŒ–
   - åº“å­˜ä½™é‡è®¡ç®—
   - æ‰¹æ¬¡è¿‡æœŸç®¡ç†

3. **é«˜çº§åŠŸèƒ½**
   - åº“å­˜é¢„è­¦
   - æŠ¥è¡¨ç»Ÿè®¡
   - æ“ä½œæ—¥å¿—
   - æ•°æ®å¯¼å…¥å¯¼å‡º

## ğŸ§ª æµ‹è¯•

- **APIæµ‹è¯•æ–‡ä»¶ï¼š** `src/app/api/v1/test-api.http`
- **æµ‹è¯•è¦†ç›–ï¼š** æ‰€æœ‰å·²å®ç°çš„APIç«¯ç‚¹
- **æµ‹è¯•å·¥å…·ï¼š** REST Client / Postman

## ğŸ“ æ–‡æ¡£

- **APIæ–‡æ¡£ï¼š** API_OUTLINE.md
- **éœ€æ±‚æ–‡æ¡£ï¼š** README.md  
- **å®ç°çŠ¶æ€ï¼š** æœ¬æ–‡æ¡£
- **æµ‹è¯•ç”¨ä¾‹ï¼š** test-api.http
